$(function(){"use strict";var a=moment().subtract(6,"days"),e=moment();$("#changeUser, #changeArea, #changeStatus").select2({allowClear:!0}),$("#reportrange").daterangepicker({ranges:{"1 Week":[moment().subtract(6,"days"),moment()],"2 Weeks":[moment().subtract(13,"days"),moment()],"4 Weeks":[moment().subtract(27,"days"),moment()],"9 Weeks":[moment().subtract(62,"days"),moment()],"13 Weeks":[moment().subtract(90,"days"),moment()]},startDate:moment().subtract(6,"days"),endDate:moment()},changeTimeReport),changeTimeReport(a,e,"1 Week"),window.chartColors={red:"rgb(198, 53, 62)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(0, 134, 68)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(231,233,237)"};var r=new Image;r.src="/assets/app/img/Excellent_1.png";var o=new Image;o.src="/assets/app/img/good_1.png";var s=new Image;s.src="/assets/app/img/Average_1.png";var n=new Image;n.src="/assets/app/img/Poor_1.png";var d=new Image;d.src="/assets/app/img/Verypoor_1.png",Chart.pluginService.register({afterUpdate:function(a){if("performanceChart"==a.canvas.id)for(var e=a.config.data.datasets[0]._meta[0].data.length,t=0;t<e;t++)switch(a.config.data.datasets[0].data[t]){case 5:a.config.data.datasets[0]._meta[0].data[t]._model.pointStyle=r;break;case 4:a.config.data.datasets[0]._meta[0].data[t]._model.pointStyle=o;break;case 3:a.config.data.datasets[0]._meta[0].data[t]._model.pointStyle=s;break;case 2:a.config.data.datasets[0]._meta[0].data[t]._model.pointStyle=n;break;default:a.config.data.datasets[0]._meta[0].data[t]._model.pointStyle=d}}});var t=document.getElementById("performanceChart").getContext("2d");performanceChart=new Chart(t,{type:"bar",data:{labels:labels,datasets:[{type:"line",label:"Performance",borderColor:window.chartColors.red,borderWidth:2,fill:!1,data:[]},{type:"bar",label:"Notifications",backgroundColor:window.chartColors.green,data:[2,4,1,3,7,3,6]}]},options:{responsive:!0,tooltips:{mode:"index",intersect:!0},scales:{yAxes:[{ticks:{min:0,beginAtZero:!0}}]}}});var l=document.getElementById("averageChart").getContext("2d");averageChart=new Chart(l,{type:"bar",data:{labels:labels,datasets:[{type:"line",label:"Average",borderColor:window.chartColors.orange,borderWidth:2,fill:!1,data:[3,6,2,9,12,5,9]},{type:"line",label:"Max",borderColor:window.chartColors.green,borderWidth:2,fill:!1,data:[2,4,1,3,7,3,6]},{type:"line",label:"Min",borderColor:window.chartColors.red,borderWidth:2,fill:!1,data:[1,2,5,1,2,1,3]}]},options:{responsive:!0,tooltips:{mode:"index",intersect:!0},scales:{yAxes:[{ticks:{min:0,beginAtZero:!0},scaleLabel:{display:!0,labelString:"(mins / %)"}}]}}});var c={labels:["Done","Not Done"],datasets:[{data:[80,20],backgroundColor:[window.chartColors.green,window.chartColors.gray]}]},i={labels:["Check","Not Check"],datasets:[{data:[65,35],backgroundColor:[window.chartColors.yellow,window.chartColors.gray]}]};Chart.pluginService.register({beforeDraw:function(a){var e=a.chart.width,t=a.chart.height,r=a.chart.ctx;if("doughnut"==a.config.type){var o=Math.round(100*a.config.data.datasets[0].data[0]/(a.config.data.datasets[0].data[0]+a.config.data.datasets[0].data[1])),s=r.fillStyle,n=((t-a.chartArea.top)/100).toFixed(2);r.restore(),r.font=n+"em sans-serif",r.textBaseline="middle";var d=o+"%",l=Math.round((e-r.measureText(d).width)/2),c=(t+a.chartArea.top)/2;r.fillStyle=a.config.data.datasets[0].backgroundColor[0],r.fillText(d,l,c),r.fillStyle=s,r.save()}}}),percentDoneChart=new Chart(document.getElementById("percentDoneChart"),{type:"doughnut",data:c,options:{responsive:!0,legend:{display:!1}}}),percentCheckChart=new Chart(document.getElementById("percentCheckChart"),{type:"doughnut",data:i,options:{responsive:!0,legend:{display:!1}}})});var performanceChart,percentDoneChart,percentCheckChart,averageChart,labels=[],dataOne=[],dataTwo=[],changeTimeReport=function(a,e,t){switch($("#reportrange span").html(a.format("MMMM D, YYYY")+" - "+e.format("MMMM D, YYYY")),t){case"1 Week":case"2 Weeks":for(var r=[],o=a;o<=e;o=moment(o).add(1,"days"))r.push(o.format("MMMM D, YYYY"));labels=r,dataOne=[],dataTwo=[2,4,1,3,7,3,6,2,4,1,3,7,3,6];break;case"4 Weeks":for(r=[],o=a;o<=e;o=moment(o).add(7,"days"))r.push(o.format("MMMM D, YYYY"));labels=r,dataOne=[],dataTwo=[3,7,3,6];break;case"9 Weeks":for(r=[],o=a;o<=e;o=moment(o).add(7,"days"))r.push(o.format("MMMM D, YYYY"));labels=r,dataOne=[5,3,2,1,5,3,4,1,4],dataTwo=[3,7,3,6,3,7,3,6,10];break;case"13 Weeks":for(r=[],o=a;o<=e;o=moment(o).add(7,"days"))r.push(o.format("MMMM D, YYYY"));labels=r,dataOne=[5,3,4,1,5,3,4,1,4,3,5,3,2],dataTwo=[3,7,3,6,3,7,3,6,10,5,3,4,10]}void 0!==performanceChart&&(performanceChart.data.labels=labels,performanceChart.data.datasets[0].data=dataOne,performanceChart.data.datasets[1].data=dataTwo,performanceChart.update())};