var api_fileuploader,card,count;$(function(){"use strict";$(".table-dynamic-notify").DataTable({processing:!0,ajax:"../../../../data/notify.json",responsive:!0,scrollX:!0,language:{searchPlaceholder:"Search...",sSearch:""},columns:[{data:"id"},{data:"area"},{data:"area"},{data:"priority"},{data:"status"},{data:"status"},{data:"time_created"},{data:null},{data:null}],columnDefs:[{targets:[0,3,4,5,6],class:"text-center"},{orderable:!1,targets:[-2],class:"text-center",render:function(e,a,i,t){return'<label class="ckbox d-inline-block"><input type="checkbox" name="all" class="all" data-id="'+e.add+'"><span></span></label>'}},{targets:[4],class:"text-center",render:function(e,a,i,t){switch(e){case 2:return'<label class="excellent"><input name="evaluation_excellent" type="radio" value="2" checked><span>Excellent</span></label>';case 1:return'<label class="good"><input name="evaluation_good" type="radio" value="1" checked><span>Good</span></label>';case-1:return'<label class="poor"><input name="evaluation_poor" type="radio" value="-1" checked><span>Poor</span></label>';case-2:return'<label class="very_poor"><input name="evaluation_very_poor" type="radio" value="-2" checked><span>Very Poor</span></label>';default:return'<label class="average"><input name="evaluation_average" type="radio" value="0" checked><span>Average</span></label>'}}},{targets:[5],class:"text-center",render:function(e,a,i,t){switch(e){case 1:return'<span class="badge badge-pill badge-info">Submitted</span>';case 2:return'<span class="badge badge-pill badge-warning">Seen</span>';case 3:return'<span class="badge badge-pill badge-danger">Done</span>';case 4:return'<span class="badge badge-pill badge-primary">Checked</span>';default:return"Locked"}}},{orderable:!1,targets:[-1],class:"text-center",render:function(e,a,i,t){return' <span class="btn-action table-action-view cursor-pointer tx-info" data-id="'+e.id+'"><i class="fa fa-eye"></i></span>'}}],drawCallback:function(){0<$('.table-dynamic-notify input[type="radio"]').length&&$('.table-dynamic-notify input[type="radio"]').iCheck({radioClass:"iradio_minimal-blue"})}});$(".dataTables_length select").select2({minimumResultsForSearch:1/0}),$("#location-id, #section-id, #line-id").select2({minimumResultsForSearch:1/0}),0<$("textarea").length&&$("textarea").summernote({height:300,tooltip:!1}),$(".datepicker").mask("99/99/9999"),$(".fc-datepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!0}),$("#timeDone").timepicker({scrollDefault:"now"}),$(document).on("click",".table-dynamic-notify .table-action-delete",function(e){e.preventDefault();var a=$(this).attr("data-id");$("#confirm-delete-modal #id").val(a),$("#confirm-delete-modal").modal({backdrop:"static",keyboard:!1})}),$("#confirm-delete-modal").on("click","#confirm-delete",function(e){$("#confirm-delete-modal #id").val()}),$(document).on("click",".table-dynamic-notify .table-action-view",function(e){e.preventDefault();$(this).attr("data-id");$("#modal-view-notify").modal("show"),$("#modal-view-notify #ttlModal").html("Info notification")}),$(document).on("click","#addNotify",function(e){e.preventDefault(),$("#modal-notify").modal("show")}),$(document).on("click","#btnNotify",function(e){e.preventDefault(),$("#NotifyForm").submit()}),$("#NotifyForm").on("submit",function(e){e.preventDefault();var a=$(this);a.parsley().validate(),a.parsley().isValid()&&alert("valid")}),$(document).on("show.bs.modal","#modal-notify",function(e){clear_form(),void 0!==api_fileuploader&&(api_fileuploader.reset(),api_fileuploader.destroy()),$("#modal-notify select.select2").hasClass("select2-hidden-accessible")&&$("#modal-notify select.select2").select2("destroy"),card=$("#failureMode").clone(),$("#modal-notify select.select2").select2({minimumResultsForSearch:1/0}),fileuploader("input.picupload"),$(".block-failure-mode").find(".row:first-child").find(".remove-failure-mode").hide()}),$(document).on("click",".add-failure-mode",function(e){$(".block-failure-mode").append($(card).html()),count=$(".block-failure-mode").find(".row").length,show_hide_btn(count);var a=$(".block-failure-mode").find(".row")[count-1];$(a).find("select.select2").select2({minimumResultsForSearch:1/0}),fileuploader($(a).find("input.picupload"))}),$(document).on("click",".remove-failure-mode",function(e){$(this).parents(".row")[0].remove(),count=$(".block-failure-mode").find(".row").length,show_hide_btn(count)}),0<$('input[type="radio"]').length&&$('input[type="radio"]').iCheck({radioClass:"iradio_minimal-blue"})});var fileuploader=function(e){0<$(e).length&&($(e).fileuploader({limit:3,extensions:["jpg","jpeg","png","gif"],changeInput:" ",theme:"thumbnails",enableApi:!0,addMore:!0,thumbnails:{box:'<div class="fileuploader-items"><ul class="fileuploader-items-list"><li class="fileuploader-thumbnails-input"><div class="fileuploader-thumbnails-input-inner"><i>+</i></div></li></ul></div>',item:'<li class="fileuploader-item file-has-popup"><div class="fileuploader-item-inner"><div class="type-holder">${extension}</div><div class="actions-holder"><a class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i></i></a></div><div class="thumbnail-holder">${image}<span class="fileuploader-action-popup"></span></div><div class="content-holder"><h5>${name}</h5></div><div class="progress-holder">${progressBar}</div></div></li>',item2:'<li class="fileuploader-item file-has-popup"><div class="fileuploader-item-inner"><div class="type-holder">${extension}</div><div class="actions-holder"><a href="${file}" class="fileuploader-action fileuploader-action-download" title="${captions.download}" download><i></i></a><a class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i></i></a></div><div class="thumbnail-holder">${image}<span class="fileuploader-action-popup"></span></div><div class="content-holder"><h5>${name}</h5></div><div class="progress-holder">${progressBar}</div></div></li>',startImageRenderer:!0,canvasImage:!0,_selectors:{list:".fileuploader-items-list",item:".fileuploader-item",start:".fileuploader-action-start",retry:".fileuploader-action-retry",remove:".fileuploader-action-remove"},onImageLoaded:function(e){},onItemShow:function(e,a,i,t,l){var o=a.find(".fileuploader-thumbnails-input"),n=$.fileuploader.getInstance(l.get(0));o.insertAfter(e.html)[(n.getOptions().limit&&n.getAppendedFiles().length||n.getOptions().limit&&n.getChoosedFiles().length)>=n.getOptions().limit?"hide":"show"](),"image"==e.format&&e.html.find(".fileuploader-item-icon").hide()},onItemRemove:function(e,a,i,t,l){var o=a.find(".fileuploader-thumbnails-input"),n=$.fileuploader.getInstance(l.get(0));e.children().animate({opacity:0},200,function(){setTimeout(function(){e.remove(),n.getFiles().length-1<n.getOptions().limit&&o.show()},100)})}},dragDrop:{container:".fileuploader-thumbnails-input"},editor:{cropper:{ratio:"1:1",minWidth:128,minHeight:128,showGrid:!0}},afterRender:function(e,a,i,t){var l=e.find(".fileuploader-thumbnails-input"),o=$.fileuploader.getInstance(t.get(0));l.on("click",function(){o.open()})}}),api_fileuploader=$.fileuploader.getInstance("input.picupload"))},show_hide_btn=function(e){switch(e){case 1:$(".block-failure-mode").find(".row:first-child").find(".add-failure-mode").show(),$(".block-failure-mode").find(".row:first-child").find(".remove-failure-mode").hide();break;case 2:$(".block-failure-mode").find(".row:first-child").find(".add-failure-mode").hide(),$(".block-failure-mode").find(".row:nth-child(2)").find(".add-failure-mode, .remove-failure-mode").show();break;default:$(".block-failure-mode").find(".row:nth-child(3), .row:nth-child(2)").find(".add-failure-mode").hide(),$(".block-failure-mode").find(".row:nth-child(3)").find(".remove-failure-mode").show()}},clear_form=function(){$("#modal-notify #ttlModal").html("Add notification"),$(".block-failure-mode").find(".row:not(:first-child)").remove(),$("#NotifyForm")[0].reset(),count=$(".block-failure-mode").find(".row").length,show_hide_btn(count)};